<Window x:Class="RadioIntercepts.WpfApp.Views.StatisticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        Title="Статистика перехватов" Height="800" Width="1100">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Статистика перехватов" 
                   FontSize="20" FontWeight="Bold" Margin="0,0,0,10"/>

        <Border Grid.Row="1" BorderBrush="LightGray" BorderThickness="1" 
                Padding="10" Margin="0,0,0,10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                    <StackPanel Margin="0,0,20,0">
                        <TextBlock Text="От:" Margin="0,0,0,2"/>
                        <DatePicker SelectedDate="{Binding DateFrom}" Width="120"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,20,0">
                        <TextBlock Text="До:" Margin="0,0,0,2"/>
                        <DatePicker SelectedDate="{Binding DateTo}" Width="120"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,20,0">
                        <TextBlock Text="Area:" Margin="0,0,0,2"/>
                        <ComboBox ItemsSource="{Binding Areas}" 
                                  DisplayMemberPath="Name"
                                  SelectedValuePath="Name"
                                  SelectedValue="{Binding SelectedArea}"
                                  IsEditable="True"
                                  Width="120"/>
                    </StackPanel>

                    <StackPanel Margin="0,0,20,0">
                        <TextBlock Text="Frequency:" Margin="0,0,0,2"/>
                        <ComboBox ItemsSource="{Binding Frequencies}" 
                                  SelectedItem="{Binding SelectedFrequency}"
                                  IsEditable="True"
                                  Width="120"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Bottom">
                        <Button Content="Применить" 
                                Command="{Binding ApplyFiltersCommand}"
                                Width="80" Margin="0,0,10,0"/>
                        <Button Content="Сбросить" 
                                Command="{Binding ClearFiltersCommand}"
                                Width="80"/>
                    </StackPanel>

                    <ProgressBar IsIndeterminate="True" Width="100" Margin="20,0,0,0"
                                 Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </StackPanel>

                <Border Grid.Row="1" BorderBrush="Blue" BorderThickness="2" 
                        Background="#E6F3FF" Padding="8">
                    <TextBlock Text="{Binding FiltersText}" 
                               FontWeight="Bold" 
                               HorizontalAlignment="Center"/>
                </Border>
            </Grid>
        </Border>

        <Border Grid.Row="2" BorderBrush="LightGray" BorderThickness="1" 
                Padding="10" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="Всего сообщений: " FontWeight="Bold"/>
                <TextBlock Text="{Binding TotalMessagesCount}" 
                           FontSize="16" FontWeight="Bold" Foreground="Blue" 
                           Margin="5,0,0,0"/>
            </StackPanel>
        </Border>

        <Border Grid.Row="3" BorderBrush="LightGray" BorderThickness="1" 
                Padding="10" Margin="0,0,0,5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="{Binding DayOfWeekChart.Title}" 
                           FontWeight="Bold" Margin="0,0,0,10"/>

                <lvc:CartesianChart Grid.Row="1" Series="{Binding DayOfWeekChart.SeriesCollection}">
                    <lvc:CartesianChart.AxisX>
                        <lvc:Axis Labels="{Binding DayOfWeekChart.Labels}"/>
                    </lvc:CartesianChart.AxisX>
                    <lvc:CartesianChart.AxisY>
                        <lvc:Axis Title="Количество сообщений"/>
                    </lvc:CartesianChart.AxisY>
                </lvc:CartesianChart>
            </Grid>
        </Border>

        <Border Grid.Row="4" BorderBrush="LightGray" BorderThickness="1" Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="{Binding HourChart.Title}" 
                           FontWeight="Bold" Margin="0,0,0,10"/>

                <lvc:CartesianChart Grid.Row="1" Series="{Binding HourChart.SeriesCollection}">
                    <lvc:CartesianChart.AxisX>
                        <lvc:Axis Labels="{Binding HourChart.Labels}"/>
                    </lvc:CartesianChart.AxisX>
                    <lvc:CartesianChart.AxisY>
                        <lvc:Axis Title="Количество сообщений"/>
                    </lvc:CartesianChart.AxisY>
                </lvc:CartesianChart>
            </Grid>
        </Border>
    </Grid>
</Window>